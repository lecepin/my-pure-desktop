const IMAGE_CACHE_NAME="pure-desktop-res",BG_LIST_CACHE_NAME="pure-desktop-bg-list";self.addEventListener("install",(e=>{self.skipWaiting()})),self.addEventListener("activate",(e=>{clients.claim()})),self.addEventListener("fetch",(e=>{if(/\.(png|jpg)$/.test(e.request.url)&&e.respondWith(caches.match(e.request).then((t=>t||fetch(e.request).then((t=>caches.open(IMAGE_CACHE_NAME).then((s=>(s.put(e.request,t.clone()),s.keys().then((t=>{Promise.all(t.map((t=>{if(t.url!=e.request.url)return s.delete(t)})))})),t))))).catch((()=>caches.open(IMAGE_CACHE_NAME).then((e=>e.keys().then((t=>{if(t.length)return e.match(t[0])}))))))))),/bg-list\.json$/.test(e.request.url))return e.respondWith(fetch(e.request).then((t=>caches.open(BG_LIST_CACHE_NAME).then((s=>(s.put(e.request,t.clone()),t))))).catch((()=>caches.match(e.request))))}));